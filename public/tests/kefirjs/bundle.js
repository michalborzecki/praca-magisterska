!function(t){var n={};function i(e){if(n[e])return n[e].exports;var r=n[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=t,i.c=n,i.d=function(t,n,e){i.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:e})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,n){if(1&n&&(t=i(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var e=Object.create(null);if(i.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var r in t)i.d(e,r,function(n){return t[n]}.bind(null,r));return e},i.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(n,"a",n),n},i.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},i.p="",i(i.s=1)}([function(t,n,i){"use strict";(function(t){function i(t){var n=arguments.length,i=void 0,e=void 0;for(i=1;i<n;i++)for(e in arguments[i])t[e]=arguments[i][e];return t}function e(t,n){var e,r,s=arguments.length,u=void 0;for(t.prototype=(e=n.prototype,(r=function(){}).prototype=e,new r),t.prototype.constructor=t,u=2;u<s;u++)i(t.prototype,arguments[u]);return t}var r=["<nothing>"],s="end",u="value",o="error",a="any";function h(t,n){var i=void 0,e=void 0,r=void 0,s=void 0;if(0===t.length)return n;if(0===n.length)return t;for(s=0,i=new Array(t.length+n.length),e=t.length,r=0;r<e;r++,s++)i[s]=t[r];for(e=n.length,r=0;r<e;r++,s++)i[s]=n[r];return i}function l(t,n){var i=t.length,e=void 0;for(e=0;e<i;e++)if(t[e]===n)return e;return-1}function _(t,n){var i=t.length,e=void 0;for(e=0;e<i;e++)if(n(t[e]))return e;return-1}function f(t){var n=t.length,i=new Array(n),e=void 0;for(e=0;e<n;e++)i[e]=t[e];return i}function c(t,n){var i=t.length,e=void 0,r=void 0,s=void 0;if(n>=0&&n<i){if(1===i)return[];for(e=new Array(i-1),r=0,s=0;r<i;r++)r!==n&&(e[s]=t[r],s++);return e}return t}function d(t,n){var i=t.length,e=new Array(i),r=void 0;for(r=0;r<i;r++)e[r]=n(t[r]);return e}function v(t,n,i){t===a?n(i):t===i.type&&(t===u||t===o?n(i.value):n())}function p(){this._items=[],this._spies=[],this._inLoop=0,this._removedItems=null}function m(){this._dispatcher=new p,this._active=!1,this._alive=!0,this._activating=!1,this._logHandlers=null,this._spyHandlers=null}function y(){m.call(this)}function g(){m.call(this),this._currentEvent=null}i(p.prototype,{add:function(t,n){return this._items=h(this._items,[{type:t,fn:n}]),this._items.length},remove:function(t,n){var i=_(this._items,function(i){return i.type===t&&i.fn===n});return 0!==this._inLoop&&-1!==i&&(null===this._removedItems&&(this._removedItems=[]),this._removedItems.push(this._items[i])),this._items=c(this._items,i),this._items.length},addSpy:function(t){return this._spies=h(this._spies,[t]),this._spies.length},removeSpy:function(t){return this._spies=c(this._spies,this._spies.indexOf(t)),this._spies.length},dispatch:function(t){this._inLoop++;for(var n=0,i=this._spies;null!==this._spies&&n<i.length;n++)i[n](t);for(var e=0,r=this._items;e<r.length&&null!==this._items;e++)null!==this._removedItems&&(s=this._removedItems,u=r[e],-1!==l(s,u))||v(r[e].type,r[e].fn,t);var s,u;this._inLoop--,0===this._inLoop&&(this._removedItems=null)},cleanup:function(){this._items=null,this._spies=null}}),i(m.prototype,{_name:"observable",_onActivation:function(){},_onDeactivation:function(){},_setActive:function(t){this._active!==t&&(this._active=t,t?(this._activating=!0,this._onActivation(),this._activating=!1):this._onDeactivation())},_clear:function(){this._setActive(!1),this._dispatcher.cleanup(),this._dispatcher=null,this._logHandlers=null},_emit:function(t,n){switch(t){case u:return this._emitValue(n);case o:return this._emitError(n);case s:return this._emitEnd()}},_emitValue:function(t){this._alive&&this._dispatcher.dispatch({type:u,value:t})},_emitError:function(t){this._alive&&this._dispatcher.dispatch({type:o,value:t})},_emitEnd:function(){this._alive&&(this._alive=!1,this._dispatcher.dispatch({type:s}),this._clear())},_on:function(t,n){return this._alive?(this._dispatcher.add(t,n),this._setActive(!0)):v(t,n,{type:s}),this},_off:function(t,n){this._alive&&(0===this._dispatcher.remove(t,n)&&this._setActive(!1));return this},onValue:function(t){return this._on(u,t)},onError:function(t){return this._on(o,t)},onEnd:function(t){return this._on(s,t)},onAny:function(t){return this._on(a,t)},offValue:function(t){return this._off(u,t)},offError:function(t){return this._off(o,t)},offEnd:function(t){return this._off(s,t)},offAny:function(t){return this._off(a,t)},observe:function(t,n,i){var e=this,r=!1,a=t&&"function"!=typeof t?t:{value:t,error:n,end:i},h=function(t){t.type===s&&(r=!0),t.type===u&&a.value?a.value(t.value):t.type===o&&a.error?a.error(t.value):t.type===s&&a.end&&a.end(t.value)};return this.onAny(h),{unsubscribe:function(){r||(e.offAny(h),r=!0)},get closed(){return r}}},_ofSameType:function(t,n){return t.prototype.getType()===this.getType()?t:n},setName:function(t,n){return this._name=n?t._name+"."+n:t,this},log:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.toString(),n=void 0,i=function(i){var e="<"+i.type+(n?":current":"")+">";i.type===s?console.log(t,e):console.log(t,e,i.value)};return this._alive&&(this._logHandlers||(this._logHandlers=[]),this._logHandlers.push({name:t,handler:i})),n=!0,this.onAny(i),n=!1,this},offLog:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.toString();if(this._logHandlers){var n=_(this._logHandlers,function(n){return n.name===t});-1!==n&&(this.offAny(this._logHandlers[n].handler),this._logHandlers.splice(n,1))}return this},spy:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.toString(),n=function(n){var i="<"+n.type+">";n.type===s?console.log(t,i):console.log(t,i,n.value)};return this._alive&&(this._spyHandlers||(this._spyHandlers=[]),this._spyHandlers.push({name:t,handler:n}),this._dispatcher.addSpy(n)),this},offSpy:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.toString();if(this._spyHandlers){var n=_(this._spyHandlers,function(n){return n.name===t});-1!==n&&(this._dispatcher.removeSpy(this._spyHandlers[n].handler),this._spyHandlers.splice(n,1))}return this}}),m.prototype.toString=function(){return"["+this._name+"]"},e(y,m,{_name:"stream",getType:function(){return"stream"}}),e(g,m,{_name:"property",_emitValue:function(t){this._alive&&(this._currentEvent={type:u,value:t},this._activating||this._dispatcher.dispatch({type:u,value:t}))},_emitError:function(t){this._alive&&(this._currentEvent={type:o,value:t},this._activating||this._dispatcher.dispatch({type:o,value:t}))},_emitEnd:function(){this._alive&&(this._alive=!1,this._activating||this._dispatcher.dispatch({type:s}),this._clear())},_on:function(t,n){return this._alive&&(this._dispatcher.add(t,n),this._setActive(!0)),null!==this._currentEvent&&v(t,n,this._currentEvent),this._alive||v(t,n,{type:s}),this},getType:function(){return"property"}});var E=new y;function b(){return E}function w(t){function n(t,n){var i=this;y.call(this),this._wait=t,this._intervalId=null,this._$onTick=function(){return i._onTick()},this._init(n)}return e(n,y,{_init:function(){},_free:function(){},_onTick:function(){},_onActivation:function(){this._intervalId=setInterval(this._$onTick,this._wait)},_onDeactivation:function(){null!==this._intervalId&&(clearInterval(this._intervalId),this._intervalId=null)},_clear:function(){y.prototype._clear.call(this),this._$onTick=null,this._free()}},t),n}E._emitEnd(),E._name="never";var A=w({_name:"later",_init:function(t){var n=t.x;this._x=n},_free:function(){this._x=null},_onTick:function(){this._emitValue(this._x),this._emitEnd()}});var S=w({_name:"interval",_init:function(t){var n=t.x;this._x=n},_free:function(){this._x=null},_onTick:function(){this._emitValue(this._x)}});var V=w({_name:"sequentially",_init:function(t){var n=t.xs;this._xs=f(n)},_free:function(){this._xs=null},_onTick:function(){1===this._xs.length?(this._emitValue(this._xs[0]),this._emitEnd()):this._emitValue(this._xs.shift())}});var T=w({_name:"fromPoll",_init:function(t){var n=t.fn;this._fn=n},_free:function(){this._fn=null},_onTick:function(){var t=this._fn;this._emitValue(t())}});function $(t){function n(n){return t._emitValue(n),t._active}function i(n){return t._emit(n.type,n.value),t._active}return{value:n,error:function(n){return t._emitError(n),t._active},end:function(){return t._emitEnd(),t._active},event:i,emit:n,emitEvent:i}}var C=w({_name:"withInterval",_init:function(t){var n=t.fn;this._fn=n,this._emitter=$(this)},_free:function(){this._fn=null,this._emitter=null},_onTick:function(){(0,this._fn)(this._emitter)}});function k(t){y.call(this),this._fn=t,this._unsubscribe=null}function O(t){return new k(t)}function x(t,n){switch(n){case 0:return function(){return t()};case 1:return function(n){return t(n[0])};case 2:return function(n){return t(n[0],n[1])};case 3:return function(n){return t(n[0],n[1],n[2])};case 4:return function(n){return t(n[0],n[1],n[2],n[3])};default:return function(n){return t.apply(null,n)}}}e(k,y,{_name:"stream",_onActivation:function(){var t=(0,this._fn)($(this));this._unsubscribe="function"==typeof t?t:null,this._active||this._callUnsubscribe()},_callUnsubscribe:function(){null!==this._unsubscribe&&(this._unsubscribe(),this._unsubscribe=null)},_onDeactivation:function(){this._callUnsubscribe()},_clear:function(){y.prototype._clear.call(this),this._fn=null}});var I=[["addEventListener","removeEventListener"],["addListener","removeListener"],["on","off"]];function L(t){this._currentEvent={type:"value",value:t,current:!0}}function P(t){return new L(t)}function M(t){this._currentEvent={type:"error",value:t,current:!0}}function H(t,n){return function(i,e){var r=this;t.call(this),this._source=i,this._name=i._name+"."+n,this._init(e),this._$handleAny=function(t){return r._handleAny(t)}}}function D(t){return{_init:function(){},_free:function(){},_handleValue:function(t){this._emitValue(t)},_handleError:function(t){this._emitError(t)},_handleEnd:function(){this._emitEnd()},_handleAny:function(t){switch(t.type){case u:return this._handleValue(t.value);case o:return this._handleError(t.value);case s:return this._handleEnd()}},_onActivation:function(){this._source.onAny(this._$handleAny)},_onDeactivation:function(){this._source.offAny(this._$handleAny)},_clear:function(){t.prototype._clear.call(this),this._source=null,this._$handleAny=null,this._free()}}}function N(t,n){var i=H(y,t);return e(i,y,D(y),n),i}function q(t,n){var i=H(g,t);return e(i,g,D(g),n),i}e(L,g,{_name:"constant",_active:!1,_activating:!1,_alive:!1,_dispatcher:null,_logHandlers:null}),e(M,g,{_name:"constantError",_active:!1,_activating:!1,_alive:!1,_dispatcher:null,_logHandlers:null});var B=q("toProperty",{_init:function(t){var n=t.fn;this._getInitialCurrent=n},_onActivation:function(){if(null!==this._getInitialCurrent){var t=this._getInitialCurrent;this._emitValue(t())}this._source.onAny(this._$handleAny)}});function W(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null!==n&&"function"!=typeof n)throw new Error("You should call toProperty() with a function or no arguments.");return new B(t,{fn:n})}var j=N("changes",{_handleValue:function(t){this._activating||this._emitValue(t)},_handleError:function(t){this._activating||this._emitError(t)}});function U(){if("function"==typeof Promise)return Promise;throw new Error("There isn't default Promise, use shim or parameter")}var F="undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:{};function Q(t,n){return t(n={exports:{}},n.exports),n.exports}var z=Q(function(t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(t){var n,i=t.Symbol;"function"==typeof i?i.observable?n=i.observable:(n=i("observable"),i.observable=n):n="@@observable";return n}}),Y=Q(function(t,n){Object.defineProperty(n,"__esModule",{value:!0});var i,e,r=(i=z)&&i.__esModule?i:{default:i};e="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==F?F:t;var s=(0,r.default)(e);n.default=s}),K=Y.default?Y.default:Y;function G(t){this._observable=t.takeErrors(1)}function J(){return new G(this)}function R(t,n,i){for(var e in t)t.hasOwnProperty(e)&&(n.push(e),i.push(t[e]))}function X(t,n,i){var e=this;y.call(this),this._activeCount=t.length,this._sources=h(t,n),this._combinator=i,this._aliveCount=0,this._latestValues=new Array(this._sources.length),this._latestErrors=new Array(this._sources.length),function(t,n){var i=t.length,e=void 0;for(e=0;e<i;e++)t[e]=n}(this._latestValues,r),this._emitAfterActivation=!1,this._endAfterActivation=!1,this._latestErrorIndex=0,this._$handlers=[];for(var s=function(t){e._$handlers.push(function(n){return e._handleAny(t,n)})},u=0;u<this._sources.length;u++)s(u)}function Z(t,n,i){return"function"==typeof n&&(i=n,n=void 0),Array.isArray(t)?function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=arguments[2];if(!Array.isArray(n))throw new Error("Combine can only combine active and passive collections of the same type.");return i=i?x(i,t.length+n.length):function(t){return t},0===t.length?b():new X(t,n,i)}(t,n,i):function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments[2];if("object"!=typeof n||Array.isArray(n))throw new Error("Combine can only combine active and passive collections of the same type.");var e=[],r=[],s=[];return R(t,e,r),R(n,e,s),0===r.length?b():new X(r,s,function(t){for(var n={},r=t.length-1;0<=r;r--)n[e[r]]=t[r];return i?i(n):n})}(t,n,i)}i(G.prototype,{subscribe:function(t,n,i){var e=this,r="function"==typeof t?{next:t,error:n,complete:i}:t,a=function(t){t.type===s&&(h=!0),t.type===u&&r.next?r.next(t.value):t.type===o&&r.error?r.error(t.value):t.type===s&&r.complete&&r.complete(t.value)};this._observable.onAny(a);var h=!1;return{unsubscribe:function(){h=!0,e._observable.offAny(a)},get closed(){return h}}}}),G.prototype[K]=function(){return this},e(X,y,{_name:"combine",_onActivation:function(){this._aliveCount=this._activeCount;for(var t=this._activeCount;t<this._sources.length;t++)this._sources[t].onAny(this._$handlers[t]);for(var n=0;n<this._activeCount;n++)this._sources[n].onAny(this._$handlers[n]);this._emitAfterActivation&&(this._emitAfterActivation=!1,this._emitIfFull()),this._endAfterActivation&&this._emitEnd()},_onDeactivation:function(){var t=this._sources.length,n=void 0;for(n=0;n<t;n++)this._sources[n].offAny(this._$handlers[n])},_emitIfFull:function(){for(var t=!0,n=!1,i=this._latestValues.length,e=new Array(i),s=new Array(i),u=0;u<i;u++)e[u]=this._latestValues[u],s[u]=this._latestErrors[u],e[u]===r&&(t=!1),void 0!==s[u]&&(n=!0);if(t){var o=this._combinator;this._emitValue(o(e))}n&&this._emitError(function(t){for(var n=void 0,i=0;i<t.length;i++)void 0!==t[i]&&(void 0===n||n.index<t[i].index)&&(n=t[i]);return n.error}(s))},_handleAny:function(t,n){n.type===u||n.type===o?(n.type===u&&(this._latestValues[t]=n.value,this._latestErrors[t]=void 0),n.type===o&&(this._latestValues[t]=r,this._latestErrors[t]={index:this._latestErrorIndex++,error:n.value}),t<this._activeCount&&(this._activating?this._emitAfterActivation=!0:this._emitIfFull())):t<this._activeCount&&(this._aliveCount--,0===this._aliveCount&&(this._activating?this._endAfterActivation=!0:this._emitEnd()))},_clear:function(){y.prototype._clear.call(this),this._sources=null,this._latestValues=null,this._latestErrors=null,this._combinator=null,this._$handlers=null}});var tt={empty:function(){return b()},concat:function(t,n){return t.merge(n)},of:function(t){return P(t)},map:function(t,n){return n.map(t)},bimap:function(t,n,i){return i.mapErrors(t).map(n)},ap:function(t,n){return Z([t,n],function(t,n){return t(n)})},chain:function(t,n){return n.flatMap(t)}},nt=Object.freeze({Observable:tt}),it={_init:function(t){var n=t.fn;this._fn=n},_free:function(){this._fn=null},_handleValue:function(t){var n=this._fn;this._emitValue(n(t))}},et=N("map",it),rt=q("map",it),st=function(t){return t};function ut(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:st;return new(t._ofSameType(et,rt))(t,{fn:n})}var ot={_init:function(t){var n=t.fn;this._fn=n},_free:function(){this._fn=null},_handleValue:function(t){(0,this._fn)(t)&&this._emitValue(t)}},at=N("filter",ot),ht=q("filter",ot),lt=function(t){return t};var _t={_init:function(t){var n=t.n;this._n=n,n<=0&&this._emitEnd()},_handleValue:function(t){0!==this._n&&(this._n--,this._emitValue(t),0===this._n&&this._emitEnd())}},ft=N("take",_t),ct=q("take",_t);var dt={_init:function(t){var n=t.n;this._n=n,n<=0&&this._emitEnd()},_handleError:function(t){0!==this._n&&(this._n--,this._emitError(t),0===this._n&&this._emitEnd())}},vt=N("takeErrors",dt),pt=q("takeErrors",dt);var mt={_init:function(t){var n=t.fn;this._fn=n},_free:function(){this._fn=null},_handleValue:function(t){(0,this._fn)(t)?this._emitValue(t):this._emitEnd()}},yt=N("takeWhile",mt),gt=q("takeWhile",mt),Et=function(t){return t};var bt={_init:function(){this._lastValue=r},_free:function(){this._lastValue=null},_handleValue:function(t){this._lastValue=t},_handleEnd:function(){this._lastValue!==r&&this._emitValue(this._lastValue),this._emitEnd()}},wt=N("last",bt),At=q("last",bt);var St={_init:function(t){var n=t.n;this._n=Math.max(0,n)},_handleValue:function(t){0===this._n?this._emitValue(t):this._n--}},Vt=N("skip",St),Tt=q("skip",St);var $t={_init:function(t){var n=t.fn;this._fn=n},_free:function(){this._fn=null},_handleValue:function(t){var n=this._fn;null===this._fn||n(t)||(this._fn=null),null===this._fn&&this._emitValue(t)}},Ct=N("skipWhile",$t),kt=q("skipWhile",$t),Ot=function(t){return t};var xt={_init:function(t){var n=t.fn;this._fn=n,this._prev=r},_free:function(){this._fn=null,this._prev=null},_handleValue:function(t){var n=this._fn;this._prev!==r&&n(this._prev,t)||(this._prev=t,this._emitValue(t))}},It=N("skipDuplicates",xt),Lt=q("skipDuplicates",xt),Pt=function(t,n){return t===n};function Mt(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Pt;return new(t._ofSameType(It,Lt))(t,{fn:n})}var Ht={_init:function(t){var n=t.fn,i=t.seed;this._fn=n,this._prev=i},_free:function(){this._prev=null,this._fn=null},_handleValue:function(t){if(this._prev!==r){var n=this._fn;this._emitValue(n(this._prev,t))}this._prev=t}},Dt=N("diff",Ht),Nt=q("diff",Ht);function qt(t,n){return[t,n]}var Bt=q("scan",{_init:function(t){var n=t.fn,i=t.seed;this._fn=n,this._seed=i,i!==r&&this._emitValue(i)},_free:function(){this._fn=null,this._seed=null},_handleValue:function(t){var n=this._fn;null===this._currentEvent||this._currentEvent.type===o?this._emitValue(this._seed===r?t:n(this._seed,t)):this._emitValue(n(this._currentEvent.value,t))}});var Wt=N("flatten",{_init:function(t){var n=t.fn;this._fn=n},_free:function(){this._fn=null},_handleValue:function(t){for(var n=(0,this._fn)(t),i=0;i<n.length;i++)this._emitValue(n[i])}}),jt=function(t){return t};var Ut={},Ft={_init:function(t){var n=this,i=t.wait;this._wait=Math.max(0,i),this._buff=[],this._$shiftBuff=function(){var t=n._buff.shift();t===Ut?n._emitEnd():n._emitValue(t)}},_free:function(){this._buff=null,this._$shiftBuff=null},_handleValue:function(t){this._activating?this._emitValue(t):(this._buff.push(t),setTimeout(this._$shiftBuff,this._wait))},_handleEnd:function(){this._activating?this._emitEnd():(this._buff.push(Ut),setTimeout(this._$shiftBuff,this._wait))}},Qt=N("delay",Ft),zt=q("delay",Ft);var Yt=Date.now?function(){return Date.now()}:function(){return(new Date).getTime()},Kt={_init:function(t){var n=this,i=t.wait,e=t.leading,r=t.trailing;this._wait=Math.max(0,i),this._leading=e,this._trailing=r,this._trailingValue=null,this._timeoutId=null,this._endLater=!1,this._lastCallTime=0,this._$trailingCall=function(){return n._trailingCall()}},_free:function(){this._trailingValue=null,this._$trailingCall=null},_handleValue:function(t){if(this._activating)this._emitValue(t);else{var n=Yt();0!==this._lastCallTime||this._leading||(this._lastCallTime=n);var i=this._wait-(n-this._lastCallTime);i<=0?(this._cancelTrailing(),this._lastCallTime=n,this._emitValue(t)):this._trailing&&(this._cancelTrailing(),this._trailingValue=t,this._timeoutId=setTimeout(this._$trailingCall,i))}},_handleEnd:function(){this._activating?this._emitEnd():this._timeoutId?this._endLater=!0:this._emitEnd()},_cancelTrailing:function(){null!==this._timeoutId&&(clearTimeout(this._timeoutId),this._timeoutId=null)},_trailingCall:function(){this._emitValue(this._trailingValue),this._timeoutId=null,this._trailingValue=null,this._lastCallTime=this._leading?Yt():0,this._endLater&&this._emitEnd()}},Gt=N("throttle",Kt),Jt=q("throttle",Kt);var Rt={_init:function(t){var n=this,i=t.wait,e=t.immediate;this._wait=Math.max(0,i),this._immediate=e,this._lastAttempt=0,this._timeoutId=null,this._laterValue=null,this._endLater=!1,this._$later=function(){return n._later()}},_free:function(){this._laterValue=null,this._$later=null},_handleValue:function(t){this._activating?this._emitValue(t):(this._lastAttempt=Yt(),this._immediate&&!this._timeoutId&&this._emitValue(t),this._timeoutId||(this._timeoutId=setTimeout(this._$later,this._wait)),this._immediate||(this._laterValue=t))},_handleEnd:function(){this._activating?this._emitEnd():this._timeoutId&&!this._immediate?this._endLater=!0:this._emitEnd()},_later:function(){var t=Yt()-this._lastAttempt;t<this._wait&&t>=0?this._timeoutId=setTimeout(this._$later,this._wait-t):(this._timeoutId=null,this._immediate||(this._emitValue(this._laterValue),this._laterValue=null),this._endLater&&this._emitEnd())}},Xt=N("debounce",Rt),Zt=q("debounce",Rt);var tn={_init:function(t){var n=t.fn;this._fn=n},_free:function(){this._fn=null},_handleError:function(t){var n=this._fn;this._emitError(n(t))}},nn=N("mapErrors",tn),en=q("mapErrors",tn),rn=function(t){return t};var sn={_init:function(t){var n=t.fn;this._fn=n},_free:function(){this._fn=null},_handleError:function(t){(0,this._fn)(t)&&this._emitError(t)}},un=N("filterErrors",sn),on=q("filterErrors",sn),an=function(t){return t};var hn={_handleValue:function(){}},ln=N("ignoreValues",hn),_n=q("ignoreValues",hn);var fn={_handleError:function(){}},cn=N("ignoreErrors",fn),dn=q("ignoreErrors",fn);var vn={_handleEnd:function(){}},pn=N("ignoreEnd",vn),mn=q("ignoreEnd",vn);var yn={_init:function(t){var n=t.fn;this._fn=n},_free:function(){this._fn=null},_handleEnd:function(){var t=this._fn;this._emitValue(t()),this._emitEnd()}},gn=N("beforeEnd",yn),En=q("beforeEnd",yn);var bn={_init:function(t){var n=t.min,i=t.max;this._max=i,this._min=n,this._buff=[]},_free:function(){this._buff=null},_handleValue:function(t){this._buff=function(t,n,i){var e=Math.min(i,t.length+1),r=t.length-e+1,s=new Array(e),u=void 0;for(u=r;u<e;u++)s[u-r]=t[u];return s[e-1]=n,s}(this._buff,t,this._max),this._buff.length>=this._min&&this._emitValue(this._buff)}},wn=N("slidingWindow",bn),An=q("slidingWindow",bn);var Sn={_init:function(t){var n=t.fn,i=t.flushOnEnd;this._fn=n,this._flushOnEnd=i,this._buff=[]},_free:function(){this._buff=null},_flush:function(){null!==this._buff&&0!==this._buff.length&&(this._emitValue(this._buff),this._buff=[])},_handleValue:function(t){this._buff.push(t),(0,this._fn)(t)||this._flush()},_handleEnd:function(){this._flushOnEnd&&this._flush(),this._emitEnd()}},Vn=N("bufferWhile",Sn),Tn=q("bufferWhile",Sn),$n=function(t){return t};var Cn={_init:function(t){var n=t.count,i=t.flushOnEnd;this._count=n,this._flushOnEnd=i,this._buff=[]},_free:function(){this._buff=null},_flush:function(){null!==this._buff&&0!==this._buff.length&&(this._emitValue(this._buff),this._buff=[])},_handleValue:function(t){this._buff.push(t),this._buff.length>=this._count&&this._flush()},_handleEnd:function(){this._flushOnEnd&&this._flush(),this._emitEnd()}},kn=N("bufferWithCount",Cn),On=q("bufferWithCount",Cn);var xn={_init:function(t){var n=this,i=t.wait,e=t.count,r=t.flushOnEnd;this._wait=i,this._count=e,this._flushOnEnd=r,this._intervalId=null,this._$onTick=function(){return n._flush()},this._buff=[]},_free:function(){this._$onTick=null,this._buff=null},_flush:function(){null!==this._buff&&(this._emitValue(this._buff),this._buff=[])},_handleValue:function(t){this._buff.push(t),this._buff.length>=this._count&&(clearInterval(this._intervalId),this._flush(),this._intervalId=setInterval(this._$onTick,this._wait))},_handleEnd:function(){this._flushOnEnd&&0!==this._buff.length&&this._flush(),this._emitEnd()},_onActivation:function(){this._intervalId=setInterval(this._$onTick,this._wait),this._source.onAny(this._$handleAny)},_onDeactivation:function(){null!==this._intervalId&&(clearInterval(this._intervalId),this._intervalId=null),this._source.offAny(this._$handleAny)}},In=N("bufferWithTimeOrCount",xn),Ln=q("bufferWithTimeOrCount",xn);var Pn={_init:function(t){var n,i=t.transducer;this._xform=i((n=this,{"@@transducer/step":function(t,i){return n._emitValue(i),null},"@@transducer/result":function(){return n._emitEnd(),null}}))},_free:function(){this._xform=null},_handleValue:function(t){null!==this._xform["@@transducer/step"](null,t)&&this._xform["@@transducer/result"](null)},_handleEnd:function(){this._xform["@@transducer/result"](null)}},Mn=N("transduce",Pn),Hn=q("transduce",Pn);var Dn={_init:function(t){var n=t.fn;this._handler=n,this._emitter=$(this)},_free:function(){this._handler=null,this._emitter=null},_handleAny:function(t){this._handler(this._emitter,t)}},Nn=N("withHandler",Dn),qn=q("withHandler",Dn);var Bn=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};function Wn(t,n){var i=this;y.call(this),this._buffers=d(t,function(t){return Bn(t)?f(t):[]}),this._sources=d(t,function(t){return Bn(t)?b():t}),this._combinator=n?x(n,this._sources.length):function(t){return t},this._aliveCount=0,this._$handlers=[];for(var e=function(t){i._$handlers.push(function(n){return i._handleAny(t,n)})},r=0;r<this._sources.length;r++)e(r)}function jn(t,n){return 0===t.length?b():new Wn(t,n)}e(Wn,y,{_name:"zip",_onActivation:function(){for(;this._isFull();)this._emit();var t=this._sources.length;this._aliveCount=t;for(var n=0;n<t&&this._active;n++)this._sources[n].onAny(this._$handlers[n])},_onDeactivation:function(){for(var t=0;t<this._sources.length;t++)this._sources[t].offAny(this._$handlers[t])},_emit:function(){for(var t=new Array(this._buffers.length),n=0;n<this._buffers.length;n++)t[n]=this._buffers[n].shift();var i=this._combinator;this._emitValue(i(t))},_isFull:function(){for(var t=0;t<this._buffers.length;t++)if(0===this._buffers[t].length)return!1;return!0},_handleAny:function(t,n){n.type===u&&(this._buffers[t].push(n.value),this._isFull()&&this._emit()),n.type===o&&this._emitError(n.value),n.type===s&&(this._aliveCount--,0===this._aliveCount&&this._emitEnd())},_clear:function(){y.prototype._clear.call(this),this._sources=null,this._buffers=null,this._combinator=null,this._$handlers=null}});var Un=function(t){return t};function Fn(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=n.queueLim,e=void 0===i?0:i,r=n.concurLim,s=void 0===r?-1:r,u=n.drop,o=void 0===u?"new":u;y.call(this),this._queueLim=e<0?-1:e,this._concurLim=s<0?-1:s,this._drop=o,this._queue=[],this._curSources=[],this._$handleSubAny=function(n){return t._handleSubAny(n)},this._$endHandlers=[],this._currentlyAdding=null,0===this._concurLim&&this._emitEnd()}function Qn(t){Fn.call(this),this._addAll(t),this._initialised=!0}function zn(t){return 0===t.length?b():new Qn(t)}function Yn(t){var n=this;y.call(this),this._generator=t,this._source=null,this._inLoop=!1,this._iteration=0,this._$handleAny=function(t){return n._handleAny(t)}}e(Fn,y,{_name:"abstractPool",_add:function(t,n){n=n||Un,-1===this._concurLim||this._curSources.length<this._concurLim?this._addToCur(n(t)):-1===this._queueLim||this._queue.length<this._queueLim?this._addToQueue(n(t)):"old"===this._drop&&(this._removeOldest(),this._add(t,n))},_addAll:function(t){var n=this;!function(t,n){var i=t.length,e=void 0;for(e=0;e<i;e++)n(t[e])}(t,function(t){return n._add(t)})},_remove:function(t){-1===this._removeCur(t)&&this._removeQueue(t)},_addToQueue:function(t){this._queue=h(this._queue,[t])},_addToCur:function(t){if(this._active){if(!t._alive)return t._currentEvent&&this._emit(t._currentEvent.type,t._currentEvent.value),void(this._active&&(0!==this._queue.length?this._pullQueue():0===this._curSources.length&&this._onEmpty()));this._currentlyAdding=t,t.onAny(this._$handleSubAny),this._currentlyAdding=null,t._alive&&(this._curSources=h(this._curSources,[t]),this._active&&this._subToEnd(t))}else this._curSources=h(this._curSources,[t])},_subToEnd:function(t){var n=this,i=function(){return n._removeCur(t)};this._$endHandlers.push({obs:t,handler:i}),t.onEnd(i)},_subscribe:function(t){t.onAny(this._$handleSubAny),this._active&&this._subToEnd(t)},_unsubscribe:function(t){t.offAny(this._$handleSubAny);var n=_(this._$endHandlers,function(n){return n.obs===t});-1!==n&&(t.offEnd(this._$endHandlers[n].handler),this._$endHandlers.splice(n,1))},_handleSubAny:function(t){t.type===u?this._emitValue(t.value):t.type===o&&this._emitError(t.value)},_removeQueue:function(t){var n=l(this._queue,t);return this._queue=c(this._queue,n),n},_removeCur:function(t){this._active&&this._unsubscribe(t);var n=l(this._curSources,t);return this._curSources=c(this._curSources,n),-1!==n&&(0!==this._queue.length?this._pullQueue():0===this._curSources.length&&this._onEmpty()),n},_removeOldest:function(){this._removeCur(this._curSources[0])},_pullQueue:function(){0!==this._queue.length&&(this._queue=f(this._queue),this._addToCur(this._queue.shift()))},_onActivation:function(){for(var t=0,n=this._curSources;t<n.length&&this._active;t++)this._subscribe(n[t])},_onDeactivation:function(){for(var t=0,n=this._curSources;t<n.length;t++)this._unsubscribe(n[t]);null!==this._currentlyAdding&&this._unsubscribe(this._currentlyAdding)},_isEmpty:function(){return 0===this._curSources.length},_onEmpty:function(){},_clear:function(){y.prototype._clear.call(this),this._queue=null,this._curSources=null,this._$handleSubAny=null,this._$endHandlers=null}}),e(Qn,Fn,{_name:"merge",_onEmpty:function(){this._initialised&&this._emitEnd()}}),e(Yn,y,{_name:"repeat",_handleAny:function(t){t.type===s?(this._source=null,this._getSource()):this._emit(t.type,t.value)},_getSource:function(){if(!this._inLoop){this._inLoop=!0;for(var t=this._generator;null===this._source&&this._alive&&this._active;)this._source=t(this._iteration++),this._source?this._source.onAny(this._$handleAny):this._emitEnd();this._inLoop=!1}},_onActivation:function(){this._source?this._source.onAny(this._$handleAny):this._getSource()},_onDeactivation:function(){this._source&&this._source.offAny(this._$handleAny)},_clear:function(){y.prototype._clear.call(this),this._generator=null,this._source=null,this._$handleAny=null}});var Kn=function(t){return new Yn(t)};function Gn(t){return Kn(function(n){return t.length>n&&t[n]}).setName("concat")}function Jn(){Fn.call(this)}function Rn(t,n,i){var e=this;Fn.call(this,i),this._source=t,this._fn=n,this._mainEnded=!1,this._lastCurrent=null,this._$handleMain=function(t){return e._handleMain(t)}}function Xn(t,n){Rn.call(this,t,n)}function Zn(t,n){return function(i,e,s){var u=this;t.call(this),this._primary=i,this._secondary=e,this._name=i._name+"."+n,this._lastSecondary=r,this._$handleSecondaryAny=function(t){return u._handleSecondaryAny(t)},this._$handlePrimaryAny=function(t){return u._handlePrimaryAny(t)},this._init(s)}}function ti(t){return{_init:function(){},_free:function(){},_handlePrimaryValue:function(t){this._emitValue(t)},_handlePrimaryError:function(t){this._emitError(t)},_handlePrimaryEnd:function(){this._emitEnd()},_handleSecondaryValue:function(t){this._lastSecondary=t},_handleSecondaryError:function(t){this._emitError(t)},_handleSecondaryEnd:function(){},_handlePrimaryAny:function(t){switch(t.type){case u:return this._handlePrimaryValue(t.value);case o:return this._handlePrimaryError(t.value);case s:return this._handlePrimaryEnd(t.value)}},_handleSecondaryAny:function(t){switch(t.type){case u:return this._handleSecondaryValue(t.value);case o:return this._handleSecondaryError(t.value);case s:this._handleSecondaryEnd(t.value),this._removeSecondary()}},_removeSecondary:function(){null!==this._secondary&&(this._secondary.offAny(this._$handleSecondaryAny),this._$handleSecondaryAny=null,this._secondary=null)},_onActivation:function(){null!==this._secondary&&this._secondary.onAny(this._$handleSecondaryAny),this._active&&this._primary.onAny(this._$handlePrimaryAny)},_onDeactivation:function(){null!==this._secondary&&this._secondary.offAny(this._$handleSecondaryAny),this._primary.offAny(this._$handlePrimaryAny)},_clear:function(){t.prototype._clear.call(this),this._primary=null,this._secondary=null,this._lastSecondary=null,this._$handleSecondaryAny=null,this._$handlePrimaryAny=null,this._free()}}}function ni(t,n){var i=Zn(y,t);return e(i,y,ti(y),n),i}function ii(t,n){var i=Zn(g,t);return e(i,g,ti(g),n),i}e(Jn,Fn,{_name:"pool",plug:function(t){return this._add(t),this},unplug:function(t){return this._remove(t),this}}),e(Rn,Fn,{_onActivation:function(){Fn.prototype._onActivation.call(this),this._active&&this._source.onAny(this._$handleMain)},_onDeactivation:function(){Fn.prototype._onDeactivation.call(this),this._source.offAny(this._$handleMain),this._hadNoEvSinceDeact=!0},_handleMain:function(t){t.type===u&&(this._activating&&this._hadNoEvSinceDeact&&this._lastCurrent===t.value||this._add(t.value,this._fn),this._lastCurrent=t.value,this._hadNoEvSinceDeact=!1);t.type===o&&this._emitError(t.value),t.type===s&&(this._isEmpty()?this._emitEnd():this._mainEnded=!0)},_onEmpty:function(){this._mainEnded&&this._emitEnd()},_clear:function(){Fn.prototype._clear.call(this),this._source=null,this._lastCurrent=null,this._$handleMain=null}}),e(Xn,Rn,{_handleMain:function(t){t.type===o&&(this._activating&&this._hadNoEvSinceDeact&&this._lastCurrent===t.value||this._add(t.value,this._fn),this._lastCurrent=t.value,this._hadNoEvSinceDeact=!1);t.type===u&&this._emitValue(t.value),t.type===s&&(this._isEmpty()?this._emitEnd():this._mainEnded=!0)}});var ei={_handlePrimaryValue:function(t){this._lastSecondary!==r&&this._lastSecondary&&this._emitValue(t)},_handleSecondaryEnd:function(){this._lastSecondary!==r&&this._lastSecondary||this._emitEnd()}},ri=ni("filterBy",ei),si=ii("filterBy",ei);var ui=function(t,n){return n};var oi={_handlePrimaryValue:function(t){this._lastSecondary!==r&&this._emitValue(t)},_handleSecondaryEnd:function(){this._lastSecondary===r&&this._emitEnd()}},ai=ni("skipUntilBy",oi),hi=ii("skipUntilBy",oi);var li={_handleSecondaryValue:function(){this._emitEnd()}},_i=ni("takeUntilBy",li),fi=ii("takeUntilBy",li);var ci={_init:function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).flushOnEnd,n=void 0===t||t;this._buff=[],this._flushOnEnd=n},_free:function(){this._buff=null},_flush:function(){null!==this._buff&&(this._emitValue(this._buff),this._buff=[])},_handlePrimaryEnd:function(){this._flushOnEnd&&this._flush(),this._emitEnd()},_onActivation:function(){this._primary.onAny(this._$handlePrimaryAny),this._alive&&null!==this._secondary&&this._secondary.onAny(this._$handleSecondaryAny)},_handlePrimaryValue:function(t){this._buff.push(t)},_handleSecondaryValue:function(){this._flush()},_handleSecondaryEnd:function(){this._flushOnEnd||this._emitEnd()}},di=ni("bufferBy",ci),vi=ii("bufferBy",ci);var pi={_init:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.flushOnEnd,i=void 0===n||n,e=t.flushOnChange,r=void 0!==e&&e;this._buff=[],this._flushOnEnd=i,this._flushOnChange=r},_free:function(){this._buff=null},_flush:function(){null!==this._buff&&(this._emitValue(this._buff),this._buff=[])},_handlePrimaryEnd:function(){this._flushOnEnd&&this._flush(),this._emitEnd()},_handlePrimaryValue:function(t){this._buff.push(t),this._lastSecondary===r||this._lastSecondary||this._flush()},_handleSecondaryEnd:function(){this._flushOnEnd||this._lastSecondary!==r&&!this._lastSecondary||this._emitEnd()},_handleSecondaryValue:function(t){this._flushOnChange&&!t&&this._flush(),this._lastSecondary=t}},mi=ni("bufferWhileBy",pi),yi=ii("bufferWhileBy",pi);var gi=function(){return!1},Ei=function(){return!0};var bi={_init:function(t){var n=t.fn;this._fn=n},_free:function(){this._fn=null},_handleValue:function(t){var n=(0,this._fn)(t);n.convert?this._emitError(n.error):this._emitValue(t)}},wi=N("valuesToErrors",bi),Ai=q("valuesToErrors",bi),Si=function(t){return{convert:!0,error:t}};var Vi={_init:function(t){var n=t.fn;this._fn=n},_free:function(){this._fn=null},_handleError:function(t){var n=(0,this._fn)(t);n.convert?this._emitValue(n.value):this._emitError(t)}},Ti=N("errorsToValues",Vi),$i=q("errorsToValues",Vi),Ci=function(t){return{convert:!0,value:t}};var ki={_handleError:function(t){this._emitError(t),this._emitEnd()}},Oi=N("endOnError",ki),xi=q("endOnError",ki);m.prototype.toProperty=function(t){return W(this,t)},m.prototype.changes=function(){return new j(this)},m.prototype.toPromise=function(t){return function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:U(),i=null;return new n(function(n,e){t.onAny(function(t){t.type===s&&null!==i?((i.type===u?n:e)(i.value),i=null):i=t})})}(this,t)},m.prototype.toESObservable=J,m.prototype[K]=J,m.prototype.map=function(t){return ut(this,t)},m.prototype.filter=function(t){return function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:lt;return new(t._ofSameType(at,ht))(t,{fn:n})}(this,t)},m.prototype.take=function(t){return function(t,n){return new(t._ofSameType(ft,ct))(t,{n:n})}(this,t)},m.prototype.takeErrors=function(t){return function(t,n){return new(t._ofSameType(vt,pt))(t,{n:n})}(this,t)},m.prototype.takeWhile=function(t){return function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Et;return new(t._ofSameType(yt,gt))(t,{fn:n})}(this,t)},m.prototype.last=function(){return new((t=this)._ofSameType(wt,At))(t);var t},m.prototype.skip=function(t){return function(t,n){return new(t._ofSameType(Vt,Tt))(t,{n:n})}(this,t)},m.prototype.skipWhile=function(t){return function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ot;return new(t._ofSameType(Ct,kt))(t,{fn:n})}(this,t)},m.prototype.skipDuplicates=function(t){return Mt(this,t)},m.prototype.diff=function(t,n){return function(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:r;return new(t._ofSameType(Dt,Nt))(t,{fn:n||qt,seed:i})}(this,t,n)},m.prototype.scan=function(t,n){return function(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:r;return new Bt(t,{fn:n,seed:i})}(this,t,n)},m.prototype.flatten=function(t){return function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:jt;return new Wt(t,{fn:n})}(this,t)},m.prototype.delay=function(t){return function(t,n){return new(t._ofSameType(Qt,zt))(t,{wait:n})}(this,t)},m.prototype.throttle=function(t,n){return function(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},e=i.leading,r=void 0===e||e,s=i.trailing,u=void 0===s||s;return new(t._ofSameType(Gt,Jt))(t,{wait:n,leading:r,trailing:u})}(this,t,n)},m.prototype.debounce=function(t,n){return function(t,n){var i=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).immediate,e=void 0!==i&&i;return new(t._ofSameType(Xt,Zt))(t,{wait:n,immediate:e})}(this,t,n)},m.prototype.mapErrors=function(t){return function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:rn;return new(t._ofSameType(nn,en))(t,{fn:n})}(this,t)},m.prototype.filterErrors=function(t){return function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:an;return new(t._ofSameType(un,on))(t,{fn:n})}(this,t)},m.prototype.ignoreValues=function(){return new((t=this)._ofSameType(ln,_n))(t);var t},m.prototype.ignoreErrors=function(){return new((t=this)._ofSameType(cn,dn))(t);var t},m.prototype.ignoreEnd=function(){return new((t=this)._ofSameType(pn,mn))(t);var t},m.prototype.beforeEnd=function(t){return function(t,n){return new(t._ofSameType(gn,En))(t,{fn:n})}(this,t)},m.prototype.slidingWindow=function(t,n){return function(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return new(t._ofSameType(wn,An))(t,{min:i,max:n})}(this,t,n)},m.prototype.bufferWhile=function(t,n){return function(t,n){var i=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).flushOnEnd,e=void 0===i||i;return new(t._ofSameType(Vn,Tn))(t,{fn:n||$n,flushOnEnd:e})}(this,t,n)},m.prototype.bufferWithCount=function(t,n){return function(t,n){var i=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).flushOnEnd,e=void 0===i||i;return new(t._ofSameType(kn,On))(t,{count:n,flushOnEnd:e})}(this,t,n)},m.prototype.bufferWithTimeOrCount=function(t,n,i){return function(t,n,i){var e=(arguments.length>3&&void 0!==arguments[3]?arguments[3]:{}).flushOnEnd,r=void 0===e||e;return new(t._ofSameType(In,Ln))(t,{wait:n,count:i,flushOnEnd:r})}(this,t,n,i)},m.prototype.transduce=function(t){return function(t,n){return new(t._ofSameType(Mn,Hn))(t,{transducer:n})}(this,t)},m.prototype.withHandler=function(t){return function(t,n){return new(t._ofSameType(Nn,qn))(t,{fn:n})}(this,t)},m.prototype.thru=function(t){return t(this)},m.prototype.combine=function(t,n){return Z([this,t],n)},m.prototype.zip=function(t,n){return jn([this,t],n)},m.prototype.merge=function(t){return zn([this,t])},m.prototype.concat=function(t){return Gn([this,t])};m.prototype.flatMap=function(t){return new Rn(this,t).setName(this,"flatMap")},m.prototype.flatMapLatest=function(t){return new Rn(this,t,{concurLim:1,drop:"old"}).setName(this,"flatMapLatest")},m.prototype.flatMapFirst=function(t){return new Rn(this,t,{concurLim:1}).setName(this,"flatMapFirst")},m.prototype.flatMapConcat=function(t){return new Rn(this,t,{queueLim:-1,concurLim:1}).setName(this,"flatMapConcat")},m.prototype.flatMapConcurLimit=function(t,n){return new Rn(this,t,{queueLim:-1,concurLim:n}).setName(this,"flatMapConcurLimit")},m.prototype.flatMapErrors=function(t){return new Xn(this,t).setName(this,"flatMapErrors")},m.prototype.filterBy=function(t){return i=t,new((n=this)._ofSameType(ri,si))(n,i);var n,i},m.prototype.sampledBy=function(t,n){return function(t,n,i){return Z([n],[t],i?function(t,n){return i(n,t)}:ui).setName(t,"sampledBy")}(this,t,n)},m.prototype.skipUntilBy=function(t){return i=t,new((n=this)._ofSameType(ai,hi))(n,i);var n,i},m.prototype.takeUntilBy=function(t){return i=t,new((n=this)._ofSameType(_i,fi))(n,i);var n,i},m.prototype.bufferBy=function(t,n){return function(t,n,i){return new(t._ofSameType(di,vi))(t,n,i)}(this,t,n)},m.prototype.bufferWhileBy=function(t,n){return function(t,n,i){return new(t._ofSameType(mi,yi))(t,n,i)}(this,t,n)};var Ii=!0;function Li(t){if(Ii&&console&&"function"==typeof console.warn){console.warn(t,"\nHere is an Error object for you containing the call stack:",new Error)}}m.prototype.awaiting=function(t){return Li("You are using deprecated .awaiting() method, see https://github.com/kefirjs/kefir/issues/145"),i=t,W(Mt(zn([ut(n=this,Ei),ut(i,gi)])),gi).setName(n,"awaiting");var n,i},m.prototype.valuesToErrors=function(t){return Li("You are using deprecated .valuesToErrors() method, see https://github.com/kefirjs/kefir/issues/149"),function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Si;return new(t._ofSameType(wi,Ai))(t,{fn:n})}(this,t)},m.prototype.errorsToValues=function(t){return Li("You are using deprecated .errorsToValues() method, see https://github.com/kefirjs/kefir/issues/149"),function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ci;return new(t._ofSameType(Ti,$i))(t,{fn:n})}(this,t)},m.prototype.endOnError=function(){return Li("You are using deprecated .endOnError() method, see https://github.com/kefirjs/kefir/issues/150"),new((t=this)._ofSameType(Oi,xi))(t);var t};var Pi={Observable:m,Stream:y,Property:g,never:b,later:function(t,n){return new A(t,{x:n})},interval:function(t,n){return new S(t,{x:n})},sequentially:function(t,n){return 0===n.length?b():new V(t,{xs:n})},fromPoll:function(t,n){return new T(t,{fn:n})},withInterval:function(t,n){return new C(t,{fn:n})},fromCallback:function(t){var n=!1;return O(function(i){n||(t(function(t){i.emit(t),i.end()}),n=!0)}).setName("fromCallback")},fromNodeCallback:function(t){var n=!1;return O(function(i){n||(t(function(t,n){t?i.error(t):i.emit(n),i.end()}),n=!0)}).setName("fromNodeCallback")},fromEvents:function(t,n,i){for(var e=void 0,r=void 0,s=0;s<I.length;s++)if("function"==typeof t[I[s][0]]&&"function"==typeof t[I[s][1]]){e=I[s][0],r=I[s][1];break}if(void 0===e)throw new Error("target don't support any of addEventListener/removeEventListener, addListener/removeListener, on/off method pair");return function(t,n,i){return O(function(e){var r=i?function(){e.emit(function(t,n,i){var e=i?i.length:0;if(null==n)switch(e){case 0:return t();case 1:return t(i[0]);case 2:return t(i[0],i[1]);case 3:return t(i[0],i[1],i[2]);case 4:return t(i[0],i[1],i[2],i[3]);default:return t.apply(null,i)}else switch(e){case 0:return t.call(n);default:return t.apply(n,i)}}(i,this,arguments))}:function(t){e.emit(t)};return t(r),function(){return n(r)}}).setName("fromSubUnsub")}(function(i){return t[e](n,i)},function(i){return t[r](n,i)},i).setName("fromEvents")},stream:O,constant:P,constantError:function(t){return new M(t)},fromPromise:function(t){var n=!1;return W(O(function(i){if(!n){var e=t.then(function(t){i.emit(t),i.end()},function(t){i.error(t),i.end()});e&&"function"==typeof e.done&&e.done(),n=!0}}),null).setName("fromPromise")},fromESObservable:function(t){var n=t[K]?t[K]():t;return O(function(t){var i=n.subscribe({error:function(n){t.error(n),t.end()},next:function(n){t.emit(n)},complete:function(){t.end()}});return i.unsubscribe?function(){i.unsubscribe()}:i}).setName("fromESObservable")},combine:Z,zip:jn,merge:zn,concat:Gn,Pool:Jn,pool:function(){return new Jn},repeat:Kn,staticLand:nt};Pi.Kefir=Pi,n.a=Pi}).call(this,i(2))},function(t,n,i){"use strict";i.r(n);var e=i(0);performTests("kefirjs",{simpleChain:t=>t.size.map(t=>()=>(function(t){return new Promise(n=>{for(var i=performance.now(),r=()=>{},s=e.a.stream(t=>{r=t}),u=s,o=0;o<t;o++)u=u.map(t=>t+1);var a=performance.now()-i,h=performance.now();u.onValue(t=>{var i=performance.now()-h;n({construct:a,eval:i})}),r.value(1)})})(t)),fullyConnectedLayers:t=>t.size.map(t=>()=>(function(t){return new Promise(n=>{for(var i=()=>{},r=e.a.stream(t=>{i=t}),s=r,u=[s],o=0;o<10;o++){for(var a=[],h=0;h<t;h++)a.push(e.a.combine(u,(...t)=>t.reduce((t,n)=>t+n)));u=a}var l,_=e.a.combine(u,(...t)=>t.reduce((t,n)=>t+n)),o=0;_.onValue(t=>{if(t===2*Math.pow(5,10)){var e=performance.now()-l;console.log(t),n({eval:e})}else 0==o&&(o++,l=performance.now(),i.value(2))}),i.value(1)})})(t))})},function(t,n){var i;i=function(){return this}();try{i=i||new Function("return this")()}catch(t){"object"==typeof window&&(i=window)}t.exports=i}]);